<!DOCTYPE html>
<html lang="en" ng-app="a7_9">
<head>
	<meta charset="UTF-8">
	<title>promise</title>
</head>
<body>
	<div ng-controller="c7_9">
		<div>{{t0}}</div>
		<div>{{t1}}</div>
		<button ng-click="action(true)">解决</button>
		<button ng-click="action(false)">拒绝</button>
	</div>
</body>
<script type="text/javascript" src="/bower_components/angular/angular.js"></script>
<script type="text/javascript" src="/bower_components/angular/angular-route.min.js"></script>
<script type="text/javascript" src="/bower_components/angular/angular-resource.js"></script>
<script type="text/javascript">
	var app = angular.module('a7_9',[]);

	app.controller('c7_9',['$scope','$q',
		function($scope,$q){
			var defer = $q.defer();
			$scope.action = function(type){
				defer.notify(0);
				type ? defer.resolve(1) : defer.reject(1);
			}
			var promise = defer.promise;
			promise.then(function(n){
				n++;
				$scope.t1 = "已处理完成"+n;
			},function(n){
				n++;
				$scope.t1 = "未完成"+n;
			},function(n){
				n++;
				$scope.t0 = "正在处理中:" +n;
			});
		}
	]);

</script>
</html>